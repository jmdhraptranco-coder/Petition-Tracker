{% extends "base.html" %}
{% block title %}Login - Petition Tracker{% endblock %}

{% block fullpage %}
<div class="login-page login-page-modern">
    <div class="login-aurora"></div>
    <div class="login-grid"></div>
    <div class="login-shell">
        <section class="login-panel">
            <div class="login-tabs" aria-hidden="true">
                <span class="is-muted">Sign In</span>
                <span class="is-active">Secure Login</span>
                <span class="is-muted">Recovery</span>
            </div>
            <div class="login-header">
                <div class="login-logo-wrap">
                    <img src="{{ url_for('static', filename=brand_logo_file) }}" alt="{{ brand_name }} Logo" class="login-logo-img" onerror="this.onerror=null;this.src='{{ url_for('static', filename=brand_logo_fallback) }}';">
                </div>
                <h1>{{ brand_name }}</h1>
                <p class="login-subtitle">{{ brand_subtitle }}</p>
            </div>

            {% with messages = get_flashed_messages(with_categories=true) %}
            {% if messages %}
            {% set ns = namespace(seen=[]) %}
            {% for category, message in messages %}
            {% set key = category ~ '|' ~ message %}
            {% if key not in ns.seen %}
            <div class="flash-msg flash-{{ category }}" style="margin-bottom: 1rem;">
                <span>{{ message }}</span>
            </div>
            {% set ns.seen = ns.seen + [key] %}
            {% endif %}
            {% endfor %}
            {% endif %}
            {% endwith %}

            <form method="POST" action="{{ url_for('login') }}" class="login-form">
                <div class="form-group">
                    <label for="username">Username</label>
                    <input type="text" id="username" name="username" required autofocus 
                           placeholder="Enter your username">
                </div>
                <div class="form-group">
                    <label for="password">Password</label>
                    <input type="password" id="password" name="password" required
                           placeholder="Enter your password">
                </div>
                <button type="submit" class="btn btn-primary btn-full">
                    Sign In
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M5 12h14"/><path d="M12 5l7 7-7 7"/></svg>
                </button>
            </form>

            <div class="login-footer">
                <p>PO Office - Vigilance Wing</p>
            </div>
        </section>
        <aside class="login-hero">
            <div class="login-hero-mark">
                <img src="{{ url_for('static', filename=brand_logo_file) }}" alt="{{ brand_name }} Mark" class="login-hero-logo" onerror="this.onerror=null;this.src='{{ url_for('static', filename=brand_logo_fallback) }}';">
            </div>
            <h2>Welcome to {{ brand_name }}</h2>
            <p>Secure digital vigilance workflow for officers, enquiry tracking, and action monitoring.</p>
            <div class="login-orbit">
                <span class="orbit-ring orbit-ring-a"></span>
                <span class="orbit-ring orbit-ring-b"></span>
                <span class="orbit-core"></span>
            </div>
            <div class="login-hero-pills">
                <span class="hero-pill">Realtime Tracking</span>
                <span class="hero-pill">Role Based Access</span>
                <span class="hero-pill">Secure Workflow</span>
            </div>
        </aside>
    </div>
</div>
{% endblock %}

